Drupal.Drpager={};Drupal.behaviors.drpager=function(context){$(".drpager-page",context).bind("focus",function(e){this.select();$(this).addClass("drpager-page-has-focus")}).bind("blur",function(e){$(this).removeClass("drpager-page-has-focus")}).bind("keydown",function(e){switch(e.keyCode){case 13:case 10:var self=$(this);var state=eval("("+self.attr("name")+");");var page=isNaN(self.val())?0:parseInt(self.val())-1;if(page<0){page=0}else{if(page>=state.total){page=state.total-1}}var viewContext=Drupal.Drpager.getAjaxViewContext(this);if(viewContext){Drupal.Drpager.doAjaxView(self.next(),page,viewContext)}else{document.location=state.url.replace(/drpagerpage/,page)}e.preventDefault();return false;case 38:Drupal.Drpager.pageStep(this,1);return true;case 40:Drupal.Drpager.pageStep(this,-1);return true;case 33:Drupal.Drpager.pageStep(this,5);return true;case 34:Drupal.Drpager.pageStep(this,-5);return true}});$(".pager .pager-first a",context).each(function(){if(!this.title){this.title=Drupal.t("Go to first page")}});$(".pager .pager-previous a",context).each(function(){if(!this.title){this.title=Drupal.t("Go to previous page")}});$(".pager .pager-next a",context).each(function(){if(!this.title){this.title=Drupal.t("Go to next page")}});$(".pager .pager-last a",context).each(function(){if(!this.title){this.title=Drupal.t("Go to last page")}})};Drupal.Drpager.getAjaxViewContext=function(c){if(Drupal.settings&&Drupal.settings.views&&Drupal.settings.views.ajaxViews){for(i=0;i<Drupal.settings.views.ajaxViews.length;++i){var a=".view-dom-id-"+Drupal.settings.views.ajaxViews[i].view_dom_id;var b=$(c).parents(a);if(b.size()){return{target:b.get(0),settings:Drupal.settings.views.ajaxViews[i]}}}return false}else{return false}};Drupal.Drpager.doAjaxView=function(throbberElement,page,viewContext){throbberElement.addClass("views-throbbing");var viewData={js:1,page:page};$.extend(viewData,viewContext.settings);var target=viewContext.target;var ajax_path=Drupal.settings.views.ajax_path;if(ajax_path.constructor.toString().indexOf("Array")!=-1){ajax_path=ajax_path[0]}$.ajax({url:ajax_path,type:"GET",data:viewData,success:function(response){throbberElement.removeClass("views-throbbing");var offset=$(target).offset();var scrollTarget=target;while($(scrollTarget).scrollTop()==0&&$(scrollTarget).parent()){scrollTarget=$(scrollTarget).parent()}if(offset.top-10<$(scrollTarget).scrollTop()){$(scrollTarget).animate({scrollTop:(offset.top-10)},500)}if(response.__callbacks){$.each(response.__callbacks,function(i,callback){eval(callback)(target,response)})}},error:function(xhr){throbberElement.removeClass("views-throbbing");Drupal.Views.Ajax.handleErrors(xhr,ajax_path)},dataType:"json"})};Drupal.Drpager.pageStep=function(el,step){var self=jQuery(el);var state=eval("("+self.attr("name")+");");var page=isNaN(self.val())?1:parseInt(self.val());page+=step;if(page<1){page=1}else{if(page>state.total){page=state.total}}self.val(page)};